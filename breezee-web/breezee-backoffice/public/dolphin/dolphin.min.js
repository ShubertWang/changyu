/*
 * Copyright (c) 2016 Breezee.org. All Rights Reserved. 
 */

;/*!/js/core.js*/
!function($){var DOLPHIN={},thisTool=DOLPHIN;DOLPHIN.defaults={ajax:{param:{type:"get",dataType:"json",data:{},contentType:"application/json; charset=UTF-8",async:!0,cache:!1,loading:!1,mockPathData:null},requestHeader:{},formatterRequestData:null,originalPath:"/data",mockPath:"/mockData",returnMsgKey:"returnMsg"},compare:function(t,e){return t==e},array:{separator:",",formatter:null},date:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd hh:mm:ss"},modalWin:{title:"系统提示",content:null,footer:null,defaultHidden:!1,init:null,hide:null,hidden:null},alert:{width:"300px",title:"系统提示",countDownFlag:!0,countDownTime:3},confirm:{width:"300px",title:"系统提示"},prompt:{width:"300px",title:"系统提示",mustFlag:!1,type:"text",placeholder:"",defaultValue:"",items:null,idField:"code",textField:"name"},img:{mockPath:"/public/mockImg",param:{prefixPath:"/public/mockImg",suffixPath:".png",style:{}}},url:{viewPrefix:""},mockFlag:!1},DOLPHIN.template={},DOLPHIN.browser=function(){var t={appName:"unknown",version:0,isMobile:!1,msIe:!1,firefox:!1,opera:!1,safari:!1,chrome:!1,netscape:!1},e=window.navigator.userAgent;return/(msie|firefox|opera|chrome|netscape)\D+(\d[\d.]*)/.test(e.toLowerCase())?(t[RegExp.$1]=!0,t.appname=RegExp.$1,t.version=RegExp.$2):/version\D+(\d[\d.]*).*safari/.test(e.toLowerCase())&&(t.safari=!0,t.appname="safari",t.version=RegExp.$2),t.ismobile=/mobile|Mobile/.test(e),t.language=navigator.language,t}(),DOLPHIN.path=function(){var t,e={};for(t in location)"function"!=typeof location[t]&&(e[t]=location[t]);var n=e.pathname.split("/");return e.contextPath="/"+n[1],e}(),DOLPHIN.requestMethod={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},DOLPHIN.emptyObj=function(t){for(var e in t)delete t[e];return t},DOLPHIN.isPrime=function(t){for(var e="";--t>=0;)e+="1";return!/^1?$|^(11+?)\1+$/.test(e)},DOLPHIN.isInt=function(t){return t==parseInt(t)},DOLPHIN.isNumber=function(t){return t==parseFloat(t)},DOLPHIN.isPositiveNumber=function(t,e){return t>0||!e&&0==t},DOLPHIN.compareDate=function(t,e){return t.getTime()-e.getTime()},DOLPHIN.urlAddParam=function(t,e){var n,o=t;switch(this.typeof(e)){case"array":for(var a=0;a<e.length;a++)o=this.urlAddParam(o,e[a]);break;case"object":for(n in e)o+=o.indexOf("?")>0?"&":"?",o+=n+"="+e[n]}return o},DOLPHIN.typeof=function(t){var e;switch(typeof t){case"object":e=$.isArray(t)?"array":null===t?"null":"object";break;default:e=typeof t}return e},DOLPHIN.objInArray=function(t,e,n){for(var o=n||this.defaults.compare,a=0;a<e.length;a++)if(o(t,e[a]))return!0;return!1},DOLPHIN.objIndexOfArray=function(t,e,n){for(var o=n||this.defaults.compare,a=0;a<e.length;a++)if(o(t,e[a]))return a;return-1},DOLPHIN.randomInt=function(t,e){return e=e||0,e+Math.round(Math.random()*(t-e))},DOLPHIN.random=function(t){var e=t||6,n=Math.round(Math.random()*Math.pow(10,e)),o=n+"";if(o.length<e)for(var a=0;a<e-o.length;)o="0"+o;return o},DOLPHIN.dateDifference=function(t,e){var n,o,a,r=[],i=["毫秒","秒","分钟","小时","天"],l=[1e3,60,60,24],s=0;try{if(n=Math.abs(t.getTime()-e.getTime()),0==n)o=0;else{for(o="";n>0&&s<l.length;)r.push(n%l[s]),n=Math.floor(n/l[s]),s++;for(n>0&&r.push(n),a=0;a<r.length;a++)o=r[a]+i[a]+o}}catch(u){return console.log(u),o}return o},DOLPHIN.splitString=function(t,e){var n=$.extend({},this.defaults.array,e),o=t.split(n.separator);if("function"==typeof n.formatter)for(var a=0;a<o.length;a++)o[a]=n.formatter(o[a],o);return o},DOLPHIN.joinArray=function(t,e){var n=$.extend({},this.defaults.array,e),o="";if("function"==typeof n.formatter)for(var a=0;a<t.length;a++)0!=a&&(o+=n.separator),o+=n.formatter(t[a]);else o=t.join(n.separator);return o},DOLPHIN.string2json=function(t){var e=null;try{e=jQuery.parseJSON(t)}catch(n){console.warn(n),e=t}return e},DOLPHIN.json2string=function(t,e){try{return"single"==e?JSON.stringify(t).replace(/\"/g,"\\'"):"double"==e?JSON.stringify(t).replace(/\"/g,'\\"'):JSON.stringify(t)}catch(n){return console.warn(n),t}},DOLPHIN.string2date=function(string,format){format=format||thisTool.defaults.date.dateFormat;var y=string.substring(format.indexOf("y"),format.lastIndexOf("y")+1),M=string.substring(format.indexOf("M"),format.lastIndexOf("M")+1),d=string.substring(format.indexOf("d"),format.lastIndexOf("d")+1),h=string.substring(format.indexOf("h"),format.lastIndexOf("h")+1),m=string.substring(format.indexOf("m"),format.lastIndexOf("m")+1),s=string.substring(format.indexOf("s"),format.lastIndexOf("s")+1);(null==s||""==s||isNaN(s))&&(s=(new Date).getSeconds()),(null==m||""==m||isNaN(m))&&(m=(new Date).getMinutes()),(null==h||""==h||isNaN(h))&&(h=(new Date).getHours()),(null==d||""==d||isNaN(d))&&(d=(new Date).getDate()),(null==M||""==M||isNaN(M))&&(M=(new Date).getMonth()+1),(null==y||""==y||isNaN(y))&&(y=(new Date).getFullYear());var dt=null;return eval("dt = new Date('"+y+"', '"+(M-1)+"','"+d+"','"+h+"','"+m+"','"+s+"')"),dt},DOLPHIN.date2string=function(t,e){e=e||thisTool.defaults.date.dateFormat;var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"w+":"天一二三四五六".charAt(t.getDay()),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},DOLPHIN.longDate2string=function(t,e){if(t){var n=new Date(t);return this.date2string(n,e)}return""},DOLPHIN.jsonDate2string=function(t,e){var n=null,o=null,a=null;return"string"==typeof t?(o=t,n=this.string2json(t)):(o=this.json2string(t),n=t),n&&n.time?(a=new Date(n.time),this.date2string(a,e)):this.i18n.get("core_jsonDate2string_error",o)},DOLPHIN.require=function(t){var e=Dolphin.path.contextPath+"/public"+Dolphin.systemConfig.pageScript+(Dolphin.browser.ismobile?"/mobile":"/desktop")+t+".js";document.write('<script src="'+e+'"></script>')},DOLPHIN.ajax=function(t){var e,n,o=null,a={success:function(e,n){o=e,e.success?"function"==typeof t.onSuccess&&t.onSuccess(e,n):thisTool.alert(e[thisTool.defaults.ajax.returnMsgKey]||thisTool.i18n.get("core_ajax_error"),{countDownFlag:!1,callback:function(){"function"==typeof t.onError&&t.onError(e)}})},error:function(e,n){"parsererror"==n&&200==e.status?o=e.responseText:500==e.status?thisTool.alert(n+"<br/>"+e.status+"<br/>"+e.responseText,{countDownFlag:!1}):403==e.status?thisTool.alert(thisTool.i18n.get("core_login_timeout")+'<br/><a href=".">'+thisTool.i18n.get("core_reLogin")+"</a>",{countDownFlag:!1}):404==e.status?(thisTool.alert(n+"<br/>"+e.status+"<br/>"+this.url,{countDownFlag:!1}),o=n,"function"==typeof t.onError&&t.onError(n)):(thisTool.alert(n+"<br/>"+e.status,{countDownFlag:!1}),o=n,"function"==typeof t.onError&&t.onError(n))},beforeSend:function(e){"function"==typeof t.onBeforeSend&&t.onBeforeSend.call(thisTOOL,reData),t.loading&&$("body > #loading").show();var n=$.extend({},thisTool.defaults.ajax.requestHeader,t.requestHeader);for(var o in n)e.setRequestHeader(o,n[o])},complete:function(e,n){"function"==typeof t.onComplete&&t.onComplete(e,n),t.loading&&$("body > #loading").hide()}};if(e=$.extend({},thisTool.defaults.ajax.param,a,t),"function"==typeof thisTool.defaults.ajax.formatterRequestData&&(e.data=thisTool.defaults.ajax.formatterRequestData.call(thisTool,e.data,e)),"function"==typeof e.formatterRequestData&&(e.data=e.formatterRequestData.call(thisTool,e.data,e)),e.pathData)for(n in e.pathData)e.url=e.url.replace("{"+n+"}",e.pathData[n]);if(thisTool.defaults.mockFlag&&e.url.indexOf(thisTool.defaults.ajax.originalPath+"/")>=0){var r,i,l,s="",u=e.url.indexOf("?")>0?!0:!1;if(e.url=e.url.replace(thisTool.defaults.ajax.originalPath,thisTool.defaults.ajax.mockPath),e.mockPathData)if($.isArray(e.mockPathData)){for(r=e.url.split("/"),u&&(i=r[r.length-1].split("?"),r[r.length-1]=i[0]),l=1;l<=e.mockPathData.length;l++)r[r.length-l]=e.mockPathData[e.mockPathData.length-l];e.url=r.join("/"),u&&(e.url+="?"+i[1])}else if("object"==typeof e.mockPathData)for(n in e.mockPathData)e.url=e.url.replace("{"+n+"}",e.mockPathData[n]);s="_"+e.type,u?e.url=e.url.replace("?",s+".json?"):e.url+=s+".json",e.type="get"}if(!e.forceUrl){var c;c=new RegExp("/"==thisTool.path.contextPath?"^/":"^"+thisTool.path.contextPath+"/"),c.test(e.url)||/^http:\/\//.test(e.url)||(e.url=thisTool.path.contextPath+e.url)}return $.ajax(e),o},DOLPHIN.modalWin=function(t){var e,n,o,a,r,i,l=$.extend({},thisTool.defaults.modalWin,t);return e=$('<div class="modal fade">').appendTo("body"),n=$('<div class="modal-dialog">').css({width:l.width}).appendTo(e),o=$('<div class="modal-content">').appendTo(n),a=$('<div class="modal-header">').appendTo(o),$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>').appendTo(a),$('<h4 class="modal-title">').html(l.title).appendTo(a),r=$('<div class="modal-body">').appendTo(o),r.append(l.content),l.footer&&(i=$('<div class="modal-footer">').appendTo(o),i.append(l.footer)),"function"==typeof l.init&&l.init.call(e),"function"==typeof l.show&&e.on("show.bs.modal",function(){l.show.call(e)}),"function"==typeof l.shown&&e.on("shown.bs.modal",function(){l.shown.call(e)}),"function"==typeof l.hide&&e.on("hide.bs.modal",function(){l.hide.call(e)}),"function"==typeof l.hidden&&e.on("hidden.bs.modal",function(){l.hidden.call(e)}),e.modal(l.defaultHidden?"hide":"show"),e},DOLPHIN.alert=function(t,e){var n,o=this,a=$.extend({},thisTool.defaults.alert,e);return this.browser.isMobile?(alert(t),"function"==typeof a.callback&&a.callback.call(this),!1):(a.content=t,a.countDownFlag!==!1&&(a.footer=$("<div>"),n=$('<span class="countDown">').appendTo(a.footer),n.html(o.i18n.get("core_alert_countDown",a.countDownTime)),a.init=function(){function t(){var t=arguments.callee;0!=e?(n.html(o.i18n.get("core_alert_countDown",e)),e--,setTimeout(function(){t()},1e3)):r.modal("hide")}var e=a.countDownTime,r=this;t()}),"function"==typeof a.callback&&(a.hide=function(){try{a.callback.call(this)}catch(t){console.error(t)}}),a.hidden=function(){this.remove()},this.modalWin(a))},DOLPHIN.confirm=function(t,e){var n,o,a=$.extend({},thisTool.defaults.confirm,e),r=!1,i=a.callback;return a.content=t,a.footer=$("<div>"),n=$('<button type="button" class="btn btn-primary btn-small">'+thisTool.i18n.get("core_confirm_yes")+"</button>").appendTo(a.footer),o=$('<button type="button" class="btn btn-default btn-small" >'+thisTool.i18n.get("core_confirm_no")+"</button>").appendTo(a.footer),a.init=function(){var t=this;n.click(function(){r=!0,t.modal("hide")}),o.click(function(){t.modal("hide")})},"function"==typeof i&&(a.hide=function(){i.call(this,r)}),a.hidden=function(){this.remove()},this.modalWin(a)},DOLPHIN.prompt=function(t,e){function n(){switch(l.type){default:s=i.val()}}var o,a,r,i,l=$.extend({},thisTool.defaults.prompt,e),s=null,u=l.callback;switch(l.content=$("<div>"),$("<div>").append(t).appendTo(l.content),r=$("<div>").appendTo(l.content),l.type){default:i=$('<input type="text" class="form-control" placeholder="'+l.placeholder+'" value="'+l.defaultValue+'">')}return i.appendTo(r),l.footer=$("<div>"),o=$('<button type="button" class="btn btn-primary btn-small">'+thisTool.i18n.get("core_prompt_ok")+"</button>").appendTo(l.footer),a=$('<button type="button" class="btn btn-default btn-small" >'+thisTool.i18n.get("core_prompt_cancel")+"</button>").appendTo(l.footer),l.init=function(){var t=this;i.focus(),o.click(function(){n(),t.modal("hide")}),a.click(function(){t.modal("hide")})},"function"==typeof u&&(l.hide=function(){u.call(this,s)}),l.hidden=function(){this.remove()},this.modalWin(l)},DOLPHIN.toggleCheck=function(t,e){t.each(function(){this.checked="boolean"==typeof e?e:!this.checked,$(this).change()})},DOLPHIN.toggleEnable=function(t,e){var n;t.each(function(){n=null==e?!!$(this).attr("disabled"):e,n?$(this).removeAttr("disabled"):$(this).attr("disabled","disabled")})},DOLPHIN.goHistory=function(){history.go(-1)},DOLPHIN.goUrl=function(t){0!=t.indexOf("http://")&&(t=this.path.contextPath+this.defaults.url.viewPrefix+t),location.href=t},DOLPHIN.console=null,DOLPHIN.cookie=function(t,e,n){if("undefined"==typeof e){var o=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var i=jQuery.trim(a[r]);if(i.substring(0,t.length+1)==t+"="){o=decodeURIComponent(i.substring(t.length+1));break}}return o}n=n||{},null===e&&(e="",n.expires=-1);var l="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var s;"number"==typeof n.expires?(s=new Date,s.setTime(s.getTime()+24*n.expires*60*60*1e3)):s=n.expires,l="; expires="+s.toUTCString()}var u=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),l,u,c,d].join("")},DOLPHIN.createImg=function(t){var e,n=$("<img>"),o=$.extend({},this.defaults.img.param,t);return e=this.defaults.mockFlag?this.path.contextPath+this.defaults.img.mockPath+(o.url||(o.id?"/"+o.id:!1)||"/null")+o.suffixPath:this.path.contextPath+o.prefixPath+(o.url||(o.id?"/"+o.id:!1)||"/null.png"),n.attr("src",e),n.addClass(o.css),n.css(o.style),n},DOLPHIN.initLoadingPanel=function(t){var e,n,o,a;return e=$('<div class="loading" id="loading">').appendTo(t),n=$('<div class="progressPanel">').appendTo(e),o=$('<div class="progress">').appendTo(n),a=$('<div class="progress-bar progress-bar-striped active"></div>').css("width","100%").appendTo(o),e},$(function(){DOLPHIN.initLoadingPanel("body")}),window.Dolphin=DOLPHIN,window.TOOL=DOLPHIN,$.Dolphin=DOLPHIN}(jQuery);
;/*!/js/i18n.js*/
!function(n){Dolphin.messages={},Dolphin.i18n={},Dolphin.i18n.defaults={defaultLang:navigator.language,url:"/data/i18n/{id}"},Dolphin.i18n.addMessages=function(a,e){var l=e||this.defaults.defaultLang;null==Dolphin.messages[l]&&(Dolphin.messages[l]={}),n.extend(Dolphin.messages[l],a)},Dolphin.i18n.get=function(n){var a,e,l=this.defaults.defaultLang,s=Dolphin.messages[l][n];if(s)for(a=1;a<arguments.length;a++)e=s.replace("{"+a+"}",arguments[a]);else e=n;return e},Dolphin.i18n.load=function(a,e){var l=this;Dolphin.ajax(n.extend({},e,{url:this.defaults.url.replace("{id}",a),onSuccess:function(n){e.callback&&e.callback.call(l,n)}}))}}(jQuery);
;/*!/js/formI18nBox.js*/
!function(n){function t(n,t){return this.init(n,t),this}var a=Dolphin;t.defaults={panel:null,name:null,langOption:["zh","en"],defaultLang:navigator.language,prefixName:"",suffixName:"",value:null,code:null,icon:{toggle_button:"glyphicon glyphicon-globe",toggle_button_hide:"icon-chevron-down",toggle_button_show:"icon-chevron-up"},toggleTime:300,onChange:null},t.prototype={constructor:t,name:null,panel:null,init:function(a,e){return this.opts=n.extend({},t.defaults,e),this.panel=a,this.opts.defaultLang||(this.opts.defaultLang=this.opts.langOption[0]),this.name=this.opts.name||this.panel.children('input[type="hidden"]').attr("name"),this.render(),this},render:function(){var t,e,o,i,l,p=this;return this.panel.attr("controlName",this.name),this.panel.children('input[type="hidden"]').remove(),t=n('<div class="input-group">').appendTo(this.panel),n('<span class="input-group-addon">').html(p.renderLang(p.opts.defaultLang)).appendTo(t),n('<input type="text" class="form-control">').attr("name",p.opts.prefixName+p.name+p.opts.suffixName+"."+p.opts.defaultLang).val(p.opts.value).bind("change",function(){p.change.call(p,p.opts.defaultLang,this.value,this)}).appendTo(t),e=n('<span class="input-group-addon">').click(function(){var t=this,e=n(t).children("input").val(),i=n(t).attr("__i18n_flag");e&&!i?a.i18n.load(e,{mockPathData:["categoryName"],callback:function(a){for(k in a.value)o.find('[name$=".'+k+'"]').val(a.value[k]);o.slideToggle(p.opts.toggleTime),n(t).attr("__i18n_flag",!0)}}):o.slideToggle(p.opts.toggleTime)}).appendTo(t),n("<span>").addClass(p.opts.icon.toggle_button).appendTo(e),n('<input type="hidden">').attr("name",p.opts.prefixName+p.name+p.opts.suffixName+".code").val(p.opts.code).appendTo(e),o=n('<div class="_lang_items default-hidden">').appendTo(p.panel),n.each(p.opts.langOption,function(t,a){a!=p.opts.defaultLang&&(i=n('<div class="_lang_item">').appendTo(o),l=n('<div class="input-group">').appendTo(i),n('<span class="input-group-addon">').html(p.renderLang(a)).appendTo(l),n('<input type="text" class="form-control">').attr("name",p.opts.prefixName+p.name+p.opts.suffixName+"."+a).bind("change",function(){p.change.call(p,a,this.value,this)}).appendTo(l))}),p},change:function(n,t,a){var e=this;"function"==typeof e.opts.onChange&&e.opts.onChange.call(e,n,t,a)},renderLang:function(n){return n}},n.fn.i18nBox=function(a){var e,o;return"string"==typeof a?(e=this.eq(0).data("dolphin"),e&&(o=this.eq(0).data("box")[a],"function"==typeof o)?o.apply(e,arguments.slice(1)):(console.log("I18N_BOX has no such function : "+a),!1)):(this.each(function(){n(this).data("dolphin")||n(this).data("dolphin",new t(n(this),a))}),this)},a.I18N_BOX=t}(jQuery);
;/*!/js/formFileBox.js*/
!function(e){function l(e,l){return this.init(e,l),this}var i=Dolphin;l.defaults={name:null,uploadName:"upfile",url:"/ecm/services/image/",getUrl:{url:"/ecm/services/image/detail",type:"get"},title:null,icon:{fileUpload:"glyphicon glyphicon-globe"}},l.prototype={constructor:l,panel:null,completeTitle:null,progressPanel:null,filesPanel:null,name:null,fileInput:null,fileId:null,init:function(i,t){return this.panel=i,this.files=[],this.opts=e.extend({},l.defaults,t),this.fileInput=this.panel.find('input[type="file"]'),this.name=this.opts.name||this.fileInput.attr("name"),this.fileInput.attr("name",this.opts.uploadName),this.fileId=e('<input type="hidden" />').attr("name",this.name).appendTo(this.panel),this.render(),this.bind(),this},render:function(){this.completeTitle=e('<div class="upload_complete">').html('<span class="label label-default">上传成功</span>').appendTo(this.panel),this.progressPanel=e('<div class="progress">').append('<div class="progress-bar">').appendTo(this.panel),this.filesPanel=e('<div class="dolphin_files">').appendTo(this.panel)},bind:function(){var l,i=this;l=e.extend({},{progressall:function(e,l){i.progressAll.call(i,e,l)},done:function(e,l){i.complete.call(i,e,l)}},i.opts),i.panel.find('input[type="file"]').fileupload(l)},progress:function(){},progressAll:function(e,l){this.completeTitle.hide();var i=parseInt(l.loaded/l.total*100,10)+"%";this.progressPanel.show().find(".progress-bar").css("width",i)},complete:function(e,l){var t=this,n="string"==typeof l.result?i.string2json(l.result):l.result;t.progressPanel.hide(),n.success?(t.completeTitle.fadeIn(500),setTimeout(function(){t.completeTitle.fadeOut(500)},3e3),this.addFile(n)):Dolphin.alert(n[i.defaults.ajax.returnMsgKey]||"上传失败",{countDownFlag:!1})},addFiles:function(l){var i,t,n;for(t=this.filesPanel.find("ol"),0==t.length&&(t=e("<ol>").appendTo(this.filesPanel)),i=0;i<l.result.length;i++)n=this.addFile(l.result[i]).appendTo(t);return this},addFile:function(l){var i,t,n,s,a=this;return s=this.filesPanel.find("ol"),0==s.length&&(s=e("<ol>").appendTo(this.filesPanel)),i=e("<li>").attr({"data-id":l.id}).html(l.fileName),t=e('<span class="glyphicon glyphicon-remove">').appendTo(i),t.click(function(){a.removeFile(l.id)}),i.appendTo(s),n=a.fileId.val(),n.length>0&&(n+=","),n+=l.id,a.fileId.val(n),this.files.push(l),this},removeFile:function(e){var l,i,t=this;for(l=0;l<t.files.length;l++)if(t.files[l].id==e){t.files.splice(l,1);break}for(i=t.fileId.val().split(","),l=0;l<i.length;l++)if(i[l]==e){i.splice(l,1);break}t.fileId.val(i.join(",")),t.panel.find('li[data-id="'+e+'"]').remove()},resetFiles:function(){var e,l=this;e=l.fileId.val(),this.filesPanel.empty(),e&&i.ajax({url:l.opts.getUrl.url,type:l.opts.getUrl.type,forceUrl:!0,data:{ids:e},onSuccess:function(e){l.addFiles(e.rows)}})}},e.fn.fileBox=function(i){var t,n;return"string"==typeof i?(t=this.eq(0).data("dolphin"),t&&(n=this.eq(0).data("dolphin")[i],"function"==typeof n)?n.apply(t,arguments.slice(1)):(console.log("FILE_BOX has no such function : "+i),!1)):(this.each(function(){return e(this).data("dolphin")?(t=e(this).data("dolphin"),!1):void e(this).data("dolphin",new l(e(this),i))}),t)},i.FILE_BOX=l}(jQuery);
;/*!/js/validate.js*/
!function(e){var t=Dolphin,a=function(a,r){var n=arguments.callee,o=!0;return a.each(function(){var a,l,s=e(this);switch(a=r||s.attr(n.defaults.attr),t.typeof(a)){case"array":for(l=0;l<a.length;l++)if(!n(s,a[l])){o=!1;break}break;case"string":var i,c,u=a.split(",");for(l=0;l<u.length;l++)if(c=u[l].match(/\[\S*\]/g),c=c?t.string2json(c[0]):[],c.unshift(s),i=e.trim(u[l].replace(/\[\S*\]/g,"")),!n.check.call(n,s,n.method[i],c)){o=!1;break}break;case"function":a.call(n,s)||(o=!1);break;case"object":n.check.call(n,s,a,[s])||(o=!1)}}),o};a.defaults={attr:"dol-validate"},a.check=function(e,t,a){var r,n,o,l=null;if(t.validator.apply(this,a))this.hide(e),o=!0;else{switch(r=e.attr("dol-label")||e.closest(".form-group").find("label").html()||"",typeof t.message){case"function":l=t.message.apply(this,[r].concat(a));break;case"string":for(l=t.message.replace("{label}",r),n=1;n<a.length;n++)l=l.replace("{"+n+"}",a[n])}this.show(e,l),o=!1}return o},a.show=function(e,t){var a=e.closest(".form-group");0==a.length&&(a=e.closest(".input-group")),a.addClass("has-error"),e.popover("destroy"),setTimeout(function(){e.popover({content:t,trigger:"hover",placement:"top"})},200)},a.hide=function(e){var t=e.closest(".form-group");0==t.length&&(t=e.closest(".input-group")),t.removeClass("has-error"),e.popover("destroy")},a.monitor=function(t,a){var r=this,n=t||e("["+r.defaults.attr+"]");n.bind("blur",function(){r(e(this),a)}).bind("keyup",function(){r(e(this),a)})},a.method={},a.method.required={validator:function(e){return e.val()?!0:!1},message:"{label}不能为空"},a.method.later={validator:function(a,r){var n=t.string2date(e(r).val()),o=t.string2date(a.val());return t.compareDate(o,n)<0?!1:!0},message:"结束时间不能早于开始时间"},a.method.before={validator:function(a,r){var n=t.string2date(e(r).val()),o=t.string2date(a.val());return t.compareDate(o,n)>0?!1:!0},message:"开始时间不能晚于结束时间"},a.method.maxLength={validator:function(e,t){return e.val()&&e.val().length>t?!1:!0},message:"{label}长度不能超过{1}"},a.method.minLength={validator:function(e,t){return e.val()&&e.val().length<t?!1:!0},message:function(e,t,a){return e+"长度不能低于"+a}},a.method.email={validator:function(e){return e.val()&&!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e.val())?!1:!0},message:function(e){return e+"格式不正确"}},a.method.number={validator:function(e){return e.val()&&!/^(0|[1-9][0-9]*)$/.test(e.val())?!1:!0},message:function(e){return e+"必须为数字"}},t.validate=a}(jQuery);
;/*!/js/form.js*/
!function(t){function e(t){this.init(t)}var a=Dolphin;e.defaults={panel:"body",ajax:a.ajax,formatter:null,ignore:"",select:{emptyOption:!0,codeField:"code",nameField:"name",optionUrl:null,optionParam:null,ajaxType:"get"},renderForm:{staticFlag:!1,colPreRow:2,labelCol:6,inputTypeKey:"inputType",labelKey:"label",nameKey:"attrCode",codeField:"attrCode",idField:"attrId",selectOptionsKey:"subType",eachField:null}},e.prototype={constructor:e,data:null,init:function(a){this.opts=t.extend({},e.defaults,a)},parse:function(e){var n=e||this.opts.panel;return this.parseSelect(t(n).find("select[options]")),t(n).find(".input-group.dolphin_date_picker").datepicker({format:"yyyy-mm-dd",language:navigator.language,autoclose:!0,orientation:"bottom left"}),t(n).find(".input-group.dolphin_datetime_picker").datetimepicker({format:"yyyy-mm-dd hh:ii",autoclose:!0,pickerPosition:"bottom-left"}),t(n).find(".dolphin_i18n_box").each(function(){t(this).i18nBox()}),t(n).find(".form-control-ref").each(function(){var e=t(this),n=a.path.contextPath+e.attr("data-ref-url"),o=e.attr("idField"),i=e.attr("nameField"),r=new REFWIN({type:e.attr("data-ref-type"),url:n,mockPathData:e.attr("mockPathData").split(","),idField:o||"code",textField:i||"name",multiple:"true"===e.attr("data-ref-multiple")?!0:!1,checkbox:"false"===e.attr("data-ref-checkbox")?!1:!0,cascadeCheck:"true"===e.attr("data-ref-cascadeCheck")?!0:!1,onlyLeafCheck:"true"===e.attr("data-ref-onlyLeafCheck")?!0:!1,onShow:function(){for(var t=e.find(".form-control-hidden").val().split(","),a=0;a<t.length;a++)this.refObj.check(this.refObj.findById(t[a]))},onSubmit:function(t){for(var a="",n="",o=0;o<t.length;o++)0!=o&&(a+=", ",n+=", "),a+=t[o][this.opts.textField],n+=t[o][this.opts.idField];e.find(".form-control").val(a),e.find(".form-control-hidden").val(n)}});e.find(".input-group-addon").bind("click",function(){r.show()})}),t(n).find(".dolphin_file_box").each(function(){t(this).fileBox()}),a.validate.monitor(t(this.opts.panel).find("["+a.validate.defaults.attr+"]")),this},empty:function(e,a){{var n,o=e||this.opts.panel;a||this.opts}t(o).find("[name]").each(function(){n=t(this),"input"==n[0].tagName.toLowerCase()?"radio"==n.attr("type")||"checkbox"==n.attr("type")?n[0].checked=!1:n.val(""):"select"==n[0].tagName.toLowerCase()||"textarea"==n[0].tagName.toLowerCase()?n.val(""):("p"==n[0].tagName.toLowerCase()||"span"==n[0].tagName.toLowerCase()||"div"==n[0].tagName.toLowerCase())&&n.html("")}),t(o).find("div.dolphin_i18n_box").each(function(){t(this).find("[__i18n_flag]").removeAttr("__i18n_flag"),t(this).find("._lang_items").hide()})},getValue:function(e){function a(t){var e="";for(var a in t)""!=e&&(e+=","),e+='"'+a+'":'+(t[a]?'"'+t[a]+'"':'""');return e}var n;n="string"==typeof e?t(t(e).length>0?e:"#"+e):e;var o,i,r,l,d,s,c={},p=n.find('select[name], input[name][type!="checkbox"][type!="radio"], textarea[name], input[name][type="checkbox"]:checked, input[name][type="radio"]:checked');for(l=0;l<p.length;l++)if(o=p.eq(l),!(o.closest(".table-edit").length>0||"file"==o.attr("type")))if(o.attr("name").indexOf(".")>0)for(i=o.attr("name").split("."),r=c,d=0;d<i.length;d++)d!=i.length-1?(r[i[d]]||(r[i[d]]={}),r=r[i[d]]):r[i[d]]=o.val();else c[o.attr("name")]=o.val();var h=n.find(".table-edit");for(l=0;l<h.length;l++){c[h.eq(l).attr("tableName")]=h.data("dolphin").data.rows;var f=h.eq(l).find(".list_body").children("tr").eq(0).find(".dolphin_i18n_box");for(d=0;d<f.length;d++){var u=f.eq(d).attr("controlName");for(s=0;s<c[h.eq(l).attr("tableName")].length;s++)c[h.eq(l).attr("tableName")][s][u]=a(c[h.eq(l).attr("tableName")][s][u])}}return n.find(".dolphin_i18n_box").each(function(){var e=t(this);if(e.closest(".table-edit").length>0||"file"==e.attr("type"))return!0;var n=e.attr("controlName");c[n]=a(c[n])}),c},setValue:function(e,a,n){var o,i,r,l,d=this,s=t(a||this.opts.panel),c=t.extend({},this.opts,n),p=[];if(e.lang)for(i in e.lang)e[i+"_i18n_"]={},e[i+"_i18n_"].code=e.lang[i],e[i+"_i18n_"][Dolphin.I18N_BOX.defaults.defaultLang]=e[i];return c.ignore&&(c.ignore=","+c.ignore.join(",")+","),function(t,e){for(i in t)if(!(new RegExp(","+i+",").test(c.ignore)||t[i]instanceof jQuery||t[i]instanceof HTMLElement||"_parent"==i))if(p[e]=i,"object"!=typeof t[i]){for(r="",o=0;e>=o;o++)o>0&&(r+="."),r+=p[o];l=s.find('[name="'+r+'"]'),d.setControlValue(l,t[i])}else arguments.callee(t[i],e+1)}(e,0),s.find(".dolphin_file_box").each(function(){t(this).data("dolphin").resetFiles()}),this},setControlValue:function(t,e,n){var o=n||this.opts;if(t.length>0)if("input"==t[0].tagName.toLowerCase())if("radio"==t.attr("type")||"checkbox"==t.attr("type"))if(t.length>1)for(var i=0;i<t.length;i++)t.eq(i).val()==e&&(t[i].checked=!0);else(e===!0||"true"===e||"1"===e)&&(t[0].checked=!0);else t.val(e);else"select"==t[0].tagName.toLowerCase()?(t.val(e+""),t.attr("selectedOption",e+"")):"textarea"==t[0].tagName.toLowerCase()?t.val(e+""):("p"==t[0].tagName.toLowerCase()||"span"==t[0].tagName.toLowerCase()||"div"==t[0].tagName.toLowerCase())&&t.html(t.attr("options")?a.enum.getEnumText(t.attr("options"),e):o.formatter&&"function"==typeof o.formatter[key]?o.formatter[key].call(this,e,data):e)},loadData:function(t,e,n){var o=this;t.onSuccess=function(a){"function"==typeof n.dataFilter&&(a=n.dataFilter.call(o,a)),o.setValue(a.value,e,t),"function"==typeof n.callback&&n.callback.call(o,a)},a.ajax(t)},validate:function(e){var n=e||this.opts.panel;return a.validate(t(n).find("["+a.validate.defaults.attr+"]"))},renderForm:function(e,a,n){for(var o=a||this.opts.panel,i=this,r=t.extend(!0,{},this.opts.renderForm,n),l=t('<div class="dolphin-row">').appendTo(o),d=0;d<e.length;d++)i.renderField(e[d],l,r);return l},renderField:function(e,a,n){var o,i,r,l;return"function"==typeof n.eachField&&n.eachField(e,n)===!1?!1:(e.hidden||"hidden"==e[n.inputTypeKey]?this.renderControlMethod.hidden(e,n).prependTo(a):(e[n.idField]||(e[n.idField]=Dolphin.random(8)),o=t("<div>").addClass("dolphin-col-"+24/(e.colPreRow||n.colPreRow)).attr({attrCode:e[n.codeField],attrId:e[n.idField]}),i=t("<div>").addClass("form-group").appendTo(o),r=t("<label>").addClass("dolphin-col-"+(e.labelCol||n.labelCol)+" control-label").html(e[n.labelKey]).appendTo(i),l=t("<div>").addClass("dolphin-col-"+(24-(e.labelCol||n.labelCol))).appendTo(i),this.renderControl(e,l,n)),o&&a&&o.appendTo(a),o)},renderControl:function(t,e,a){var n,o,i,r=this;return"function"==typeof t.formatter?n=t.formatter(t):a.staticFlag===!1?(o="function"==typeof a.inputTypeKey?a.inputTypeKey.call(r,t):t[a.inputTypeKey],i=this.renderControlMethod[o],n="function"==typeof i?i.call(this,t,a):this.renderControlMethod.text.call(this,t,a)):n=this.renderControlMethod["static"].call(this,t,a),e&&e.append(n),n},renderControlMethod:{text:function(e,a){var n=t('<input type="text" class="form-control"/>').val(e.defautValue||"").attr({name:e[a.nameKey],placeholder:e.placeholder||""});return n},"enum":function(e,a){var n=t('<select class="form-control">').attr({name:e[a.nameKey]});return this.parseSelect(n,{options:e[a.selectOptionsKey]}),n},hidden:function(e,a){var n=t('<input type="hidden" />').val(e.defautValue||"").attr({name:e[a.nameKey]});return n},"static":function(e,a){var n=t('<p class="form-control-static">').attr({name:e[a.nameKey]}).html(e.defaultValue||"");return n},textarea:function(e,a){var n=t('<textarea class="form-control">').attr({name:e[a.nameKey]}).html(e.defaultValue||"");return n}},submitForm:function(t){var e=a.ajax({url:t.url,data:t.data||{},type:t.type});e.success?(a.alert(e[a.defaults.ajax.returnMsgKey]||"操作成功"),t.callback&&t.callback()):a.alert(e[a.defaults.ajax.returnMsgKey])},parseSelect:function(e,n){var o=this;e.each(function(){var e,i=this,r=t.extend({},o.opts.select,n),l=t(this).attr("options")||r.options,d=t(this).attr("optionUrl")||r.optionUrl,s=t(this).attr("ajaxType")||r.ajaxType,c=t(this).attr("optionParam")||r.optionParam,p=t(this).attr("codeField")||r.codeField,h=t(this).attr("nameField")||r.nameField,f=t(this).attr("nameFormatter")||r.nameFormatter,u=t(this).attr("emptyOption")===!1||"false"===t(this).attr("emptyOption")?!1:r.emptyOption,m=t(this).attr("selectedOption")||r.selectedOption,y=t(this).attr("mockPathData")?t(this).attr("mockPathData").split(","):r.mockPathData,v=t(this).attr("dataFilter")||r.dataFilter;if(d)if(c&&(d=d+"?"+c),l=a.ajax({url:d,async:!1,type:s,mockPathData:y}),v)switch(typeof v){case"string":l=window[v].call(i,l);break;case"function":l=v.call(i,l)}else l=l.rows;else l=a.enum.getEnum(l);if(l){u&&t(this).append('<option value="">--请选择--</option>');for(var g=0;g<l.length;g++){switch(typeof f){case"string":e=window[f].call(i,l[g][h]);break;case"function":e=f.call(i,l[g][h]);break;default:e=l[g][h]}t(this).append('<option value="'+l[g][p]+'">'+e+"</option>")}m&&t(this).val(m)}t(this).attr("callback")&&(window[t(this).attr("callback")].call(this,t(this).val(),l),t(this).attr("noChange")||t(this).bind("change",function(){window[t(i).attr("callback")].call(this,t(i).val(),l)}))})},setOptions:function(e){return t.extend(!0,this.opts,e),this}},a.FORM=e,a.form=new e}(jQuery);
;/*!/js/enum.js*/
!function(t){function e(t){this.init(t)}var n=Dolphin;e.defaults={valueField:"code",textField:"name",otherField:"other",cookieFlag:!1,ajaxFlag:!1,enumUrl:null,enumTextUrl:null,async:!1,type:"get",dataType:"json",cache:!1,enumKey:"id",enumNameKey:"enumOptionId",ajax:n.ajax,enumCache:!0,dataFilter:null},e.prototype={constructor:e,enumData:{},enumType:{lowerCase:"abcdefghijklmnopqrstuvwxyz",upperCase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},init:function(n){this.opts=t.extend({},e.defaults,n),this.opts.ajaxFlag&&null==this.opts.enumTextUrl&&(this.opts.enumTextUrl=this.opts.enumUrl)},addEnumType:function(t,e){this.enumType[t]=e},addEnum:function(t,e){this.enumData[t]=e},createEnum:function(t,e,n,i){"string"==typeof e&&(e=e.split(",")),n=n||"number",i=i||0;var o=i;"number"!=n&&(o=this.enumType[n].indexOf(i),0>o&&(o=0));for(var s=[],u=null,a=null,l=0;l<e.length;l++)u="number"==n?o+l:this.enumType[n].charAt(o+l),a={},a[this.opts.valueField]=u,a[this.opts.textField]=e[l],s.push(a);return this.addEnum.call(this,t,s),s},setCookieEnum:function(t,e){Dolphin.cookie(t)||(n.cookie(t,n.json2string(e),{expires:365,path:n.path.basePath}),this.opts.enumCache===!0&&this.addEnum(t,e))},setCookieEnumByAjax:function(t){if(!n.cookie(t)){var e=this.loadEnum(t);if(e){for(var i=[],o=null,s=0;s<e.length;s++)o={},o[this.opts.valueField]=e[s][this.opts.valueField],o[this.opts.textField]=e[s][this.opts.textField],i.push(o);this.setCookieEnum(t,i)}}},setCookieEnumsByAjax:function(t){for(var e=0;e<t.length;e++)this.setCookieEnumByAjax(t[e])},getCookieEnum:function(t){var e=n.cookie(t);return n.string2json(e)},loadEnum:function(t){var e,n=this,i={};i[this.opts.enumKey]=t,e=this.opts.enumUrl.replace("{"+this.opts.enumKey+"}",t);var o=this.opts.ajax.call(this,{url:e,data:i,async:!1}),s=null;return o.success&&("function"==typeof n.opts.dataFilter&&(o=n.opts.dataFilter.call(n,o)),s=o.rows,this.opts.enumCache===!0&&this.addEnum.call(this,t,s)),s},loadEnumText:function(t,e){var n=null,i={};return i[this.opts.enumKey]=t,i[this.opts.enumNameKey]=e,this.opts.ajax.call(this,{url:this.opts.enumTextUrl,data:i,async:!1}),n},getEnum:function(t){var e=this.enumData[t];return null==e&&1==this.opts.cookieFlag&&(e=this.getCookieEnum.call(this,t)),null==e&&1==this.opts.ajaxFlag&&(e=this.loadEnum.call(this,t)),e},getEnumText:function(t,e){var i=this.getEnum(t),o=e;if(i){for(var s=0;s<i.length;s++)if(i[s][this.opts.valueField]==e){o=i[s][this.opts.textField];break}}else console&&console.log&&console.log(n.i18n.get("enum_cannot_found",t));return o},getEnumOption:function(t,e){var i=this.getEnum(t),o=null;if(i){for(var s=0;s<i.length;s++)if(i[s][this.opts.valueField]==e){o=i[s];break}}else console&&console.log&&console.log(n.i18n.get("enum_cannot_found",t));return o},setOptions:function(e){return t.extend(!0,this.opts,e),this}},n.ENUM=e,n.enum=new e}(jQuery);
;/*!/js/pagination.js*/
!function(a){function e(a){return this.init(a),this}var t=Dolphin;e.defaults={panel:"",pageSize:10,pageNumber:1,pageSizeOption:[5,10,20,50],indexStart:1,simpleFlag:!1,type:"page",onChangePageSize:null,onChangePageNumber:null,onChange:null},e.prototype={constructor:e,data:null,morePanel:null,init:function(t){return this.opts=a.extend({},e.defaults,t),this.render(),this},initData:function(e){return this.data=e,a.extend(this.opts,e),this},render:function(){switch(this.opts.type){case"more":this.renderMore();break;default:this.renderPage()}return this},renderPage:function(){var e,t=this,n=a('<div class="listFooter">').appendTo(t.opts.panel),s=a('<span class="pageInfo">').appendTo(n);s.append(t.opts.simpleFlag?"每页":"每页显示");var p=a('<select class="_pageSize">').appendTo(s);for(e=0;e<t.opts.pageSizeOption.length;e++)a('<option value="'+t.opts.pageSizeOption[e]+'">').html(t.opts.pageSizeOption[e]).appendTo(p);return s.append("条"),t.opts.simpleFlag||(s.append("，当前显示第 "),a('<span class="pageInfoNum _infoStart">').html(0).appendTo(s),s.append(" 到 "),a('<span class="pageInfoNum _infoEnd">').html(0).appendTo(s),s.append(" 条")),s.append("，共 "),a('<span class="pageInfoNum _infoTotal">').html(0).appendTo(s),s.append(" 条记录。"),a('<nav class="pagination">').addClass(t.opts.paginationClass).appendTo(n),p.change(function(){t.opts.pageSize=this.value,"function"==typeof t.opts.onChangePageSize&&t.opts.onChangePageSize.call(t),"function"==typeof t.opts.onChange&&t.opts.onChange.call(t)}),this},renderMore:function(){var e=this;return this.moreButton=a('<button type="button" class="btn btn-default btn-block default-hidden">点击加载更多</button>').click(function(){e.opts.pageNumber++,"function"==typeof e.opts.onChangePageNumber&&e.opts.onChangePageNumber.call(e),"function"==typeof e.opts.onChange&&e.opts.onChange.call(e)}).appendTo(this.opts.panel),this},refresh:function(){switch(this.opts.type){case"more":this.refreshMore();break;default:this.refreshPage()}return this},refreshPage:function(){var e=this;e.data||(e.data={total:0});var t="",n=Math.ceil(e.data.total/e.opts.pageSize);t+='<ul class="pagination">',t+='	<li class="'+(e.opts.pageNumber<=1?"disabled":"")+'"><a class="'+(e.opts.pageNumber>1?"changePage":"")+'" targetPage="'+(e.opts.pageNumber-1)+'" href="javascript:void(0)" aria-label="Previous"> <span',t+='			aria-hidden="true">&laquo;</span>',t+="	</a></li>",n>5&&this.opts.pageNumber>3&&(t+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="1">1</a></li>',t+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+(e.opts.pageNumber-3)+'">...</a></li>');var s=e.opts.pageNumber-3;e.opts.pageNumber<3||5>=n?s=0:n>5&&e.opts.pageNumber>n-3&&(s=n-5);for(var p=0;p<Math.min(n,5);p++)t+='	<li class="'+(s+p+1==e.opts.pageNumber?"active":"")+'"><a class="changePage" href="javascript:void(0)" targetPage="'+(s+p+1)+'">'+(s+p+1)+"</a></li>";return n>5&&e.opts.pageNumber<n-2&&(t+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+(e.opts.pageNumber-0+3)+'">...</a></li>',t+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+n+'">'+n+"</a></li>"),t+='	<li class="'+(e.opts.pageNumber>=n?"disabled":"")+'"><a class="'+(e.opts.pageNumber<n?"changePage":"")+'" targetPage="'+(e.opts.pageNumber-0+1)+'" href="javascript:void(0)" aria-label="Next"> <span',t+='			aria-hidden="true">&raquo;</span>',t+="	</a></li>",t+="</ul>",a(e.opts.panel).find("nav").html(t),a(e.opts.panel).find(".changePage").bind("click",function(){e.opts.pageNumber=a(this).attr("targetPage"),"function"==typeof e.opts.onChangePageNumber&&e.opts.onChangePageNumber.call(e),"function"==typeof e.opts.onChange&&e.opts.onChange.call(e)}),a(e.opts.panel).find("._pageSize").val(e.opts.pageSize),a(e.opts.panel).find("._infoStart").html(Math.min(e.opts.pageSize*(e.opts.pageNumber-1)+1,e.data.total)),a(e.opts.panel).find("._infoEnd").html(Math.min(e.opts.pageSize*e.opts.pageNumber,e.data.total)),a(e.opts.panel).find("._infoTotal").html(e.data.total),this},refreshMore:function(){return!this.data||this.opts.pageSize*this.opts.pageNumber>this.data.total?this.moreButton.hide():this.moreButton.show(),this},empty:function(){this.data={total:0},this.refresh()}},t.PAGINATION=e}(jQuery);
;/*!/js/list.js*/
!function(t){function o(t){this.init(t),this.opts.data?this.loadData(this.opts.data):this.opts.url&&this.load()}var e=Dolphin;o.defaults={id:null,panel:"#planList",columns:null,hideHeader:!1,striped:!0,bordered:!0,hover:!0,rowIndex:!0,checkbox:!0,multiple:!0,clickForCheck:!0,width:null,height:null,title:null,panelType:"panel-primary",titleIcon:"glyphicon-list",groupIcon:{group:"glyphicon-list",unGroup:"glyphicon-tags"},orderIcon:{no:"glyphicon-sort",asc:"glyphicon-sort-by-attributes",desc:"glyphicon-sort-by-attributes-alt"},data:null,idField:"id",url:null,queryParams:null,sortName:null,sortOrder:null,sortFlag:!1,ajax:e.ajax,ajaxType:"get",pathData:null,pagination:!0,pageSize:10,pageNumber:1,paginationClass:null,pageSizeOption:[5,10,20,50],paginationSimpleFlag:!1,editFlag:!1,editListName:"tableName",checkedOverCurPage:!1,checkedData:null,onClick:null,onCheck:null,onChecked:null,onUnchecked:null,onLoad:null,onLoadSuccess:null,dataFilter:null,onAddRow:null,onRemoveRow:null,mockPathData:null,loadingFlag:!0,__id__:null},o.prototype={constructor:o,__columns:null,data:null,pagination:null,tbody:null,panelTitleDOM:null,groupCount:0,groupCode:null,init:function(s){var a,i,n=this;this.opts=t.extend({},o.defaults,s),t(this.opts.panel).data("dolphin",n),this.opts.id||(this.opts.id=Math.round(Math.random()*Math.pow(10,6))),this.opts.title?(a=t('<div class="panel">').addClass(this.opts.panelType).appendTo(this.opts.panel),i=t('<div class="panel-heading">').appendTo(a),n.panelTitleDOM=t('<h3 class="panel-title">').appendTo(i),t('<span class="glyphicon">').addClass(this.opts.titleIcon).appendTo(n.panelTitleDOM),n.panelTitleDOM.append(" "),n.panelTitleDOM.append(this.opts.title)):a=t(this.opts.panel);var l=t('<div class="list-table">').addClass("dolphin_list").appendTo(a),p=t("<table>").addClass("table").appendTo(l);return this.opts.width&&l.css({width:this.opts.width}),this.opts.height&&l.css("height",this.opts.height),this.opts.maxHeight&&l.css("max-height",this.opts.maxHeight),this.opts.striped&&p.addClass("table-striped"),this.opts.bordered&&p.addClass("table-bordered"),this.opts.hover&&p.addClass("table-hover"),this.opts.editFlag&&(t(this.opts.panel).addClass("table-edit"),t(this.opts.panel).attr("tableName",this.opts.editListName)),this.initTheader(p),this.tbody=t('<tbody class="list_body">').appendTo(p),this.opts.checkbox&&this.opts.multiple&&p.find(".checkAll").bind("click",function(){var t=this;p.find(".selectedItem").each(function(){this.checked=t.checked})}),this.opts.editFlag&&p.find(".editButtonCol .addRow").bind("click",function(){n.addRowWithData({},null)}),this.opts.pagination&&(this.pagination=new e.PAGINATION({panel:l,pageSize:this.opts.pageSize,pageNumber:this.opts.pageNumber,pageSizeOption:this.opts.pageSizeOption,simpleFlag:this.opts.paginationSimpleFlag,onChange:function(){n.opts.pageSize=this.opts.pageSize,n.opts.pageNumber=this.opts.pageNumber,n.load()}})),this.opts.loadingFlag&&this.initLoading(l),this},initTheader:function(o){function e(t,o){var e=arguments.callee,s={level:1,length:0};return b[o]=(b[o]||[]).concat(t),t.forEach(function(t){var a;t.children?(a=e(t.children,o+1),s.level=Math.max(s.level,a.level+1),t.maxLevel=s.level,t.colspan=a.length,s.length+=a.length):(s.length++,m.__columns.push(t))}),t.forEach(function(t){t.rowspan=t.maxLevel?s.level-t.maxLevel+1:s.level}),s}function s(o,e,s){h=t("<th>").attr({colCode:o.code,rowspan:o.rowspan,colspan:o.colspan}).html(o.title||o.code).appendTo(s),o.hidden&&h.addClass("hiddenCol"),(o.orderFlag||m.opts.orderFlag)&&(p=t('<span class="glyphicon iconButton">').addClass(m.opts.orderIcon.no).attr({"aria-hidden":!0,colOrderCode:o.code}).bind("click",function(){var o=t(this).hasClass(m.opts.orderIcon.asc)?"asc":t(this).hasClass(m.opts.orderIcon.desc)?"desc":"no",e=t(this).attr("colOrderCode");switch(f.find("."+m.opts.orderIcon.asc+",."+m.opts.orderIcon.desc).removeClass(m.opts.orderIcon.asc).removeClass(m.opts.orderIcon.desc),o){case"no":t(this).addClass(m.opts.orderIcon.asc),m.sort(e,"asc");break;case"asc":t(this).addClass(m.opts.orderIcon.desc),m.sort(e,"desc");break;case"desc":m.sort(null,null);break;default:console.log("Error in order by "+e)}}).appendTo(h)),o.groupFlag&&(d=t('<span class="glyphicon iconButton">').addClass(m.opts.groupIcon.group).attr({"aria-hidden":!0,colOrderCode:o.code}).bind("click",function(){t(this).hasClass(m.opts.groupIcon.group)?(f.find("."+m.opts.groupIcon.unGroup).removeClass(m.opts.groupIcon.unGroup).addClass(m.opts.groupIcon.group),t(this).addClass(m.opts.groupIcon.unGroup).removeClass(m.opts.groupIcon.group),m.group(t(this).attr("colGroupCode"))):(t(this).addClass(m.opts.groupIcon.group).removeClass(m.opts.groupIcon.unGroup),m.group(null))}).appendTo(h))}var a,i,n,l,p,d,h,r,c,u,g,f=o||t(this.opts.panel).find("table"),m=this,b=[];return this.__columns=[],g=e(this.opts.columns,0).level,a=t("<thead>"),this.opts.hideHeader&&a.hide(),i=t("<tr>").appendTo(a),this.opts.checkbox&&(r=t('<th class="checkboxTh" >').attr({rowspan:g}).appendTo(i),this.opts.multiple&&(n=t('<input type="checkbox" class="checkAll" />').appendTo(r))),this.opts.rowIndex&&(c=t('<th class="rowIndexTh" >').attr({rowspan:g}).html("#").appendTo(i)),b.forEach(function(o,e){var n;n=0==e?i:t("<tr>").appendTo(a),o.forEach(function(t,o){s(t,o,n)})}),m.opts.editFlag&&(u=t('<th class="editButtonCol" >').attr({rowspan:g}).appendTo(i),l=t('<button type="button" class="btn btn-success btn-xs addRow">').appendTo(u),t('<span class="glyphicon glyphicon-plus"></span>').appendTo(l)),f.append(a),this},initLoading:function(t){this.loadingPanel=e.initLoadingPanel(t)},setColumns:function(o,e){return this.opts.columns=o,t.extend(this.opts,e),t(this.opts.panel).empty(),this.init(this.opts),this.opts.data?this.loadData(this.opts.data):this.opts.url&&this.load(),this},setTitle:function(o,e){var s=this;return s.opts.title&&(s.panelTitleDOM.empty(),t('<span class="glyphicon">').addClass(e||this.opts.titleIcon).appendTo(s.panelTitleDOM),s.panelTitleDOM.append(" "),s.panelTitleDOM.append(o||this.opts.title)),s},empty:function(){return this.data={rows:[],total:0},this.tbody.empty(),this.opts.pagination&&this.pagination.empty(),this},loadData:function(t){return this.empty(),this.data=t,"function"==typeof this.opts.dataFilter&&(this.data=this.opts.dataFilter.call(this,t)||this.data),this.groupCount=0,this.groupCode=null,this.opts.pagination&&this.pagination.initData({total:t.total,pageSize:this.opts.pageSize,pageNumber:this.opts.pageNumber}).refresh(),this.initRows(),"function"==typeof this.opts.onLoadSuccess&&this.opts.onLoadSuccess.call(this,this.data),"function"==typeof this.opts.onLoad&&this.opts.onLoad.call(this,this.data),this},load:function(o,s){this.opts.loadingFlag&&this.loadingPanel.show();var a=this;o?this.opts.url=o:o=this.opts.url,s&&(this.opts.queryParams=s),this.groupCount=0;var i=t.extend({},this.opts.queryParams);this.opts.pagination&&(o=e.urlAddParam(o,{pageSize:this.opts.pageSize,pageNumber:this.opts.pageNumber-1}),t.extend(i,{pageSize:this.opts.pageSize,pageNumber:this.opts.pageNumber-1})),this.opts.sortName&&(o=e.urlAddParam(o,{sortName:this.opts.sortName,sortOrder:this.opts.sortOrder})),this.groupCode&&t.extend(i,{groupCode:this.groupCode});var n;return n="get"==this.opts.ajaxType?i:Dolphin.json2string(i),this.opts.ajax({url:o,data:n,type:this.opts.ajaxType,mockPathData:this.opts.mockPathData,pathData:this.opts.pathData,onSuccess:function(t){a.empty(),"function"==typeof a.opts.dataFilter&&(t=a.opts.dataFilter.call(a,t)||t),a.data=t,a.opts.pagination&&a.pagination.initData({total:t.total,pageSize:a.opts.pageSize,pageNumber:a.opts.pageNumber}).refresh(),a.initRows(),"function"==typeof a.opts.onLoadSuccess&&a.opts.onLoadSuccess.call(a,a.data),"function"==typeof a.opts.onLoad&&a.opts.onLoad.call(a,a.data)},onComplete:function(){a.opts.loadingFlag&&a.loadingPanel.hide()}}),this},reload:function(t,o){return this.opts.pagination&&(this.opts.pageNumber=1),this.load(t,o),this},reloadCurPage:function(t,o){return this.load(t,o),this},reloadData:function(){return this.empty(),this.initRows(),this},query:function(t,o){return this.opts.pageNumber=1,t&&(this.opts.queryParams=t),o&&(this.opts.pathData=o),this.load(),this},group:function(t){return this.opts.sortName=null,this.opts.sortOrder=null,this.opts.groupCode=t,this.opts.pageNumber=1,this.load(),this},sort:function(t,o,e){return this.opts.sortName=t,this.opts.sortOrder=o,this.opts.groupCode=null,this.opts.pageNumber=1,e&&(this.opts.queryParams=e),this.load(),this},goPage:function(t){return this.opts.pageNumber=t,this.load(),this},initRows:function(){if(this.opts.checkbox&&this.opts.multiple&&(t(this.opts.panel).find(".checkAll")[0].checked=!1),this.data&&this.data.rows){for(var o=0;o<this.data.rows.length;o++)this.addRow(this.data.rows[o],o+1);this.opts.pagination&&this.pagination.refresh()}return this},addRow:function(t,o){return"group_total_row"==t.__type?this.addTotalRow(t,o):this.addDataRow(t,o)},addRowWithData:function(t,o){this.addRow(t,o),this.data.rows.push(t)},addTotalRow:function(o){var e=this;this.groupCount++;var s=t("<tr>").addClass("total_row").appendTo(e.tbody),a=0,i="";this.opts.checkbox&&a++,this.opts.rowIndex&&a++;for(var n=0;n<this.__columns.length;n++)this.__columns[n].hidden||a++,this.__columns[n].code==o.__group_code&&(i=this.__columns[n].title);var l=t("<td>").attr("colspan",a).appendTo(s);return"function"==typeof this.opts.totalFormatter?l.append(this.opts.totalFormatter.call(e,o,i)):(t('<span class="listGroupTotal">').html(i+"："+o.__group_value).appendTo(l),t('<span class="listGroupTotal">').html("总计："+o.__count+"条").appendTo(l)),this},addDataRow:function(o,s){var a=this;o.__id__=e.random(8);var i=t("<tr>");i.data("data",o).attr("__id__",o.__id__);var n=null;if(this.opts.checkbox){var l=t('<input value="'+o[a.opts.idField]+'" name="'+a.opts.id+'selectedItem" class="selectedItem" >');l.attr("type",a.opts.multiple?"checkbox":"radio");{t("<td>").append(l).appendTo(i)}}if(this.opts.rowIndex&&t('<td scope="row">').html(s-this.groupCount).appendTo(i),t.each(this.__columns,function(l,p){var d,h,r,c;if(n=t("<td>").attr("columnCode",p.code).appendTo(i),p.width&&n.css("width",p.width),p.textAlign&&n.css("text-align",p.textAlign),p.wrap&&n.css("white-space","nowrap"),p.hidden&&n.addClass("hiddenCol"),"string"==typeof p.code&&p.code.indexOf(".")>0)for(h=p.code.split("."),d=o,r=0;r<h.length;r++)d=d[h[r]];else d=o[p.code];if(p.formatter)n.html(p.formatter.call(this,d,o,s));else if(a.opts.editFlag){var u=null;switch(p.editType){case"select":u=t('<select class="form-control">').attr({options:p.options}),e.form.parseSelect(u);break;case"number":u=t('<input type="number" class="form-control">').attr({placeholder:p.title});break;default:u=t('<input type="text" class="form-control">').attr({placeholder:p.title})}n.html(u),u.attr({id:p.code,listName:p.code}),p.readonly&&u.attr("readonly","readonly"),d&&u.val(d),u.bind("change.binding",function(){if(p.code.indexOf(".")>0)for(h=p.code.split("."),c=o,r=0;r<h.length;r++)r==h.length-1?c[h[r]]=this.value:c=c[h[r]];else o[p.code]=this.value})}else n.html(void 0===d||null===d?"":d+"")}),this.opts.editFlag){var p=t('<button type="button" class="btn btn-danger btn-xs removeRow">').html('<span class="glyphicon glyphicon-trash"></span>').click(function(t){function e(){a.removeRow(o.__id__)}"function"==typeof a.opts.onRemoveRow?a.opts.onRemoveRow.call(a,o,t,i)===!1||e():e()});t('<td class="editButtonCol">').html(p).appendTo(i)}return t(a.tbody).append(i),this.opts.checkbox&&l.bind("change",function(){a.opts.checkedData&&(this.checked?a.opts.checkedData.push(o):a.opts.checkedData.splice(e.objIndexOfArray(o,a.opts.checkedData,function(t,o){return t[a.opts.idField]===o[a.opts.idField]}),1)),"function"==typeof a.opts.onCheck&&a.opts.onCheck.call(a,o,i,this),"function"==typeof a.opts.onChecked&&this.checked&&a.opts.onChecked.call(a,o,i,this),"function"==typeof a.opts.onUnchecked&&(this.checked||a.opts.onUnchecked.call(a,o,i,this))}),this.opts.checkbox&&this.opts.clickForCheck&&i.bind("click",function(t){"input"!==t.target.tagName.toLowerCase()&&"select"!==t.target.tagName.toLowerCase()&&"button"!==t.target.tagName.toLowerCase()&&"a"!==t.target.tagName.toLowerCase()&&(a.opts.multiple?e.toggleCheck(i.find(".selectedItem")):e.toggleCheck(i.find(".selectedItem"),!0))}),"function"==typeof this.opts.onClick&&i.bind("click",function(e){t(e.target).hasClass("selectedItem")||t(e.target).hasClass("btn")||a.opts.onClick.call(a,o,i,e)}),a.opts.checkbox&&a.opts.checkedData&&(e.objInArray(o[a.opts.idField],a.opts.checkedData,function(t,o){return t==o[a.opts.idField]})||o.__checked===!0)&&l.attr("checked","checked").change(),this.opts.checkbox&&this.opts.multiple&&l.bind("change",function(){for(var o=t(a.opts.panel).find(".selectedItem"),e=!0,s=0;s<o.length;s++)if(!o[s].checked){e=!1;break}t(a.opts.panel).find(".checkAll")[0].checked=e}),this},removeRow:function(o){for(var e=0;e<this.data.rows.length;e++)(this.data.rows[e][this.opts.idField]==o||this.data.rows[e].__id__==o)&&(this.data.rows.splice(e,1),this.data.total&&this.data.total--,t(this.opts.panel).find("input[type=checkbox][value='"+o+"'],tr[__id__='"+o+"']").closest("tr").remove())},removeRowsById:function(t){for(var o=0;o<t.length;o++)this.removeRow(t[o])},removeRows:function(t){for(var o=0;o<t.length;o++)this.removeRow(t[o][this.opts.idField])},getRows:function(){return this.data.rows},check:function(o){if(t.isArray(o))for(var s=0;s<o.length;s++)this.check(o[s]);else{var a=null;a="string"==typeof o?o:o[this.opts.idField],e.toggleCheck(t(this.opts.panel).find('input[value="'+a+'"]'),!0)}return this},unCheckAll:function(){e.toggleCheck(t(this.opts.panel).find('input[value="'+checkId+'"]'),!1),this.checkedData=[]},getChecked:function(){if(this.opts.checkedOverCurPage)return this.opts.checkedData;for(var o=t(this.opts.panel).find(".selectedItem:checked"),e=[],s=0;s<o.length;s++)e.push(o.eq(s).closest("tr").data("data"));return e},length:function(){return this.data.rows.length},getName:function(t){var o;return o="function"==typeof this.opts.nameField?this.opts.nameField.call(this,t):t[this.opts.nameField]}},e.LIST=o}(jQuery);
;/*!/js/tree.js*/
!function(t){function e(t){this.init(t)}var n=Dolphin;e.defaults={id:null,url:null,data:null,panel:"body",idField:"id",nameField:"name",queryParams:null,ajax:n.ajax,defaultId:-1,requestKey:"id",checkbox:!0,multiple:!0,cascadeCheck:!0,onlyLeafCheck:!1,clickForCheck:!0,checkedOverCurPage:!1,checkedData:[],onload:null,onClick:null,onQuery:null,onChecked:null,icon:{folder_open:"glyphicon glyphicon-folder-open",folder_close:"glyphicon glyphicon-folder-close",file:"glyphicon glyphicon-file"}},e.prototype={constructor:e,data:null,lastQueryStr:null,queryResult:null,queryCount:null,init:function(n){this.opts=t.extend({},e.defaults,n),this.opts.id||(this.opts.id=Math.round(Math.random()*Math.pow(10,6))),this.opts.data?(this.loadData(this.opts.data),this.initData(this.data,null),this.render(this.data,t(this.opts.panel)),"function"==typeof this.opts.onLoad&&this.opts.onLoad.call(this)):this.opts.url&&this.load(function(){this.initData(this.data,null),this.render(this.data,t(this.opts.panel)),"function"==typeof this.opts.onLoad&&this.opts.onLoad.call(this)})},reload:function(){this.load(function(){this.initData(this.data,null),this.render(this.data,t(this.opts.panel)),"function"==typeof this.opts.onLoad&&this.opts.onLoad.call(this)})},empty:function(){t(this.opts.panel).empty()},loadData:function(t){this.data=t},load:function(e){var n=this,a=t.extend({},this.opts.queryParams),o=this.opts.url.replace("{"+this.opts.requestKey+"}",this.opts.defaultId);this.opts.ajax({url:o,data:a,mockPathData:this.opts.mockPathData,onSuccess:function(t){n.data=t.rows,"function"==typeof e&&e.call(n,t)},onError:function(){n.data=[]}})},initData:function(e,n){var a=this,o=arguments.callee;t.each(e,function(t,e){null!=n&&(e._parent=n),"function"==typeof a.opts.dataFilter&&(e=a.opts.dataFilter.call(a,e)),e.children&&o.call(a,e.children,e)})},render:function(e,a){var o=this;a.addClass("Dolphin-tree"),a.empty();var i=arguments.callee,s=t("<table></table>").attr("id",o.opts.id+"_grid").addClass("tree-table").appendTo(a),l=t("<tbody></tbody>").attr("id",o.opts.id+"_body").appendTo(s);t.each(e,function(e,a){var s=t("<tr>").addClass("treeItem").attr("itemType",a.type).appendTo(l);a.target=s;var c=t("<td>").css({width:"20px"}).appendTo(s);if(c.html("folder"==a.type?'<span class="'+o.opts.icon.folder_close+' toggleIcon" aria-hidden="true"></span>':'<span class="'+o.opts.icon.file+'" aria-hidden="true"></span>'),o.opts.checkbox)if(o.opts.onlyLeafCheck&&"folder"==a.type)t("<td>").css({width:"20px"}).appendTo(s);else{var d=t("<td>").css({width:"20px"}).appendTo(s),r=t('<input id="'+o.opts.id+'_item_1" name="'+o.opts.id+'selectedItem" class="selectedItem" title="'+o.getName(a)+'" style="margin-top: 0px;" >');r.attr("type",o.opts.multiple?"checkbox":"radio").val(a[o.opts.idField]).appendTo(d)}var h=t("<td>").addClass("tree-label").html(o.getName(a)).appendTo(s);if("folder"==a.type&&a.children){var p=t('<tr class="treeChildren" hidden >').appendTo(l);a.childrenTarget=p;var u=t('<td style="padding-left: 20px;padding-right: 0px;" colspan="3">').appendTo(p);i.call(o,a.children,u),a.hasLoadChildren=!0}else a.hasLoadChildren=!1;o.opts.onClick&&h.bind("click",function(){o.opts.onClick.call(o,a)}),o.opts.checkbox&&o.opts.clickForCheck&&s.bind("click",function(e){"input"===e.target.tagName.toLowerCase()||"select"===e.target.tagName.toLowerCase()||"button"===e.target.tagName.toLowerCase()||"a"===e.target.tagName.toLowerCase()||t(e.target).hasClass("toggleIcon")||(o.opts.multiple?n.toggleCheck(r):n.toggleCheck(r,!0))}),o.opts.checkbox&&r.bind("change.onChekced",function(){this.checked?"function"==typeof o.opts.onChecked&&o.opts.onChecked.call(o,a):"function"==typeof o.opts.onUnChecked&&o.opts.onUnChecked.call(o,a),"function"==typeof o.opts.onCheck&&o.opts.onCheck.call(o,a,this)}),s.find(".toggleIcon").click(function(){t(this).hasClass(o.opts.icon.folder_close)?o.expend(a):o.collapse(a)}),o.opts.checkedOverCurPage&&r&&r.bind("change.checkedData",function(){this.checked?n.objInArray(a,o.opts.checkedData,function(t,e){return t[o.opts.idField]===e[o.opts.idField]})||o.opts.checkedData.push(a):o.opts.checkedData.splice(n.objIndexOfArray(a,o.opts.checkedData,function(t,e){return t[o.opts.idField]===e[o.opts.idField]}),1)}),o.opts.checkbox&&o.opts.cascadeCheck&&o.opts.multiple&&!o.opts.onlyLeafCheck&&r.bind("change.parent",function(){var e=t(this).closest(".treeChildren");if(0!=e.length){var n=e.prev().find(".selectedItem");if(this.checked){var a=t(this).closest(".treeItem"),o=a.siblings(".treeItem"),i=!0;t.each(o,function(e,n){return 0==t(n).find(".selectedItem")[0].checked?(i=!1,!1):void 0}),i&&(n[0].checked=!0,n.triggerHandler("change.checkedData"))}else n[0].checked=!1,n.triggerHandler("change.checkedData");n.triggerHandler("change.parent")}}).bind("change.children",function(){var e=this,n=t(this).closest(".treeItem");if("folder"==n.attr("itemType")){var a=n.next();0!=a.length&&a.find(".selectedItem").each(function(){this.checked=e.checked,t(this).triggerHandler("change.checkedData")})}}),o.opts.checkbox&&r&&(n.objInArray(a[o.opts.idField],o.opts.checkedData,function(t,e){return t==e[o.opts.idField]})||a.__checked)&&r.attr("checked","checked").change()})},find:function(e,n){var a=this,o=arguments.callee,i=[];return n=n||a.data,t.each(n,function(t,n){(n[a.opts.idField]&&n[a.opts.idField].indexOf(e)>=0||a.getName(n)&&a.getName(n).indexOf(e)>=0)&&(a.opts.onlyLeafCheck!==!1&&(a.opts.onlyLeafCheck!==!0||n.children&&n.children.length>0)||i.push(n)),n.children&&(i=i.concat(o.call(a,e,n.children)))}),i},findById:function(t,e){var n=this,a=arguments.callee,o=null;e=e||n.data;for(var i=0;i<e.length;i++){if(data=e[i],data[n.opts.idField]==t)return o=data;if(data.children&&(o=a.call(n,t,data.children),null!=o))break}return o},findByIds:function(e,a){var o=this,i=arguments.callee,s=[];return a=a||o.data,t.each(a,function(t,a){n.objInArray(a[o.opts.idField],e)&&s.push(a),a.children&&(s=s.concat(i.call(o,e,a.children)))}),s},findByText:function(){},expend:function(e){var n,a,o=this;e.target.find(".toggleIcon").removeClass(o.opts.icon.folder_close),e.hasLoadChildren?(e.target.find(".toggleIcon").addClass(o.opts.icon.folder_open),e.target.next().toggle()):(n=this.opts.url.replace("{"+this.opts.requestKey+"}",e[this.opts.idField]),a={},a[this.opts.requestKey]=e[this.opts.idField],this.opts.ajax({url:n,mockPathData:this.opts.mockPathData,data:a,onSuccess:function(n){var a=n.rows;o.initData(a,e),e.children=a;var i=t('<tr class="treeChildren" hidden>');e.target.after(i),e.childrenTarget=i;var s=t('<td style="padding-left: 20px;padding-right: 0px;" colspan="3">').appendTo(i);o.render(e.children,s),e.hasLoadChildren=!0,e.target.find(".toggleIcon").addClass(o.opts.icon.folder_open),e.target.next().toggle()}}))},expandTo:function(t){var e=this,n=arguments.callee;t&&t._parent&&(t._parent.target.next().show(),t._parent.target.find(".toggleIcon").removeClass(e.opts.icon.folder_close).addClass(e.opts.icon.folder_open),n.call(e,t._parent))},expandAll:function(){t(this.opts.panel).find(".toggleIcon").removeClass(this.opts.icon.folder_close).addClass(this.opts.icon.folder_open),t(this.opts.panel).find("tr.treeChildren").show()},collapse:function(t){t.target.find(".toggleIcon").toggleClass(this.opts.icon.folder_close).toggleClass(this.opts.icon.folder_open),t.target.next().toggle()},collapseAll:function(){t(this.opts.panel).find(".toggleIcon").removeClass(this.opts.icon.folder_open).addClass(this.opts.icon.folder_close),t(this.opts.panel).find("tr.treeChildren").hide()},scrollTo:function(t){t&&t.target.find("input").eq(0).focus()},hightLight:function(t){t&&t.target.addClass("highLight")},cleanHightLight:function(){t(this.opts.panel).find(".treeItem.highLight").removeClass("highLight")},query:function(t){this.lastQueryStr==t?this.queryCount<this.queryResult.length||(this.queryCount=0):(this.queryResult=this.find(t),this.queryCount=0,this.lastQueryStr=t),this.collapseAll(),this.cleanHightLight(),this.hightLight(this.queryResult[this.queryCount]),this.expandTo(this.queryResult[this.queryCount]),"function"==typeof this.opts.onQuery&&this.opts.onQuery.call(this,this.queryResult,this.queryCount),this.queryCount++},check:function(t,e){t&&(t.target.find(".selectedItem")[0].checked=!0,e&&t.target.find(".selectedItem").change())},uncheck:function(t){t&&(t.target.find(".selectedItem")[0].checked=!1,changeFlag&&t.target.find(".selectedItem").change())},getChecked:function(){var e=this;if(e.opts.checkedOverCurPage)return this.opts.checkedData;for(var n=t(this.opts.panel).find(".selectedItem:checked"),a=[],o=[],i=0;i<n.length;i++)a.push(n.eq(i).val());return o=this.findByIds(a)},getName:function(t){var e,n=this;return e="function"==typeof n.opts.nameField?n.opts.nameField.call(n,t):t[n.opts.nameField]}},n.TREE=e}(jQuery);
;/*!/js/horizontalTree.js*/
!function(t){function e(t){return this.init(t),this.opts.data?this.loadData(this.opts.data):this.opts.url&&this.load(null,null),this}var l=Dolphin;e.defaults={panel:null,url:null,data:null,fluid:!1,idField:"id",nameField:"name",childrenField:"children",loadingFlag:!0,ajax:l.ajax,mockPathData:null,levelTitle:null,singleRoot:!1,itemType:null,defaultId:-1,requestKey:"id",buttons:[],buttonDefaultClass:"btn-primary",itemButtons:[],icon:{},queryParams:null,dataFilter:null},e.prototype={constructor:e,__panel__:null,panel:null,data:null,selectedItem:null,itemPanel:{},reloadFlag:!1,init:function(l){return this.opts=t.extend({},e.defaults,l),this.initLayout(),this},initLayout:function(){var e,l,a,i=this;return e=t('<div class="_horizontal_tree">').appendTo(this.opts.panel),i.opts.fluid&&e.addClass("_horizontal_fluid"),l=t("<table>").appendTo(e),a=t("<tbody>").appendTo(l),this.panel=t("<tr>").appendTo(a),this.__panel__=e,this},loadData:function(t,e){var l=this;return t?t[l.opts.childrenField]=e:this.data=e,this.renderLevel(e,t),this.complete(),this},load:function(e,l){var a=this,i=t.extend(!0,{},this.opts.queryParams);l?a.opts.url=l:l=a.opts.url,e?(i[a.opts.requestKey]=e[a.opts.idField],l=a.opts.url.replace("{"+a.opts.requestKey+"}",e[a.opts.idField])):(i[a.opts.requestKey]=a.opts.defaultId,l=a.opts.url.replace("{"+a.opts.requestKey+"}",a.opts.defaultId)),this.opts.ajax({url:l,mockPathData:a.opts.mockPathData,loading:a.opts.loadingFlag,data:i,onSuccess:function(t){"function"==typeof a.opts.dataFilter&&(t=a.opts.dataFilter.call(a,t)),e?e[a.opts.childrenField]=t.rows:(a.data=t.rows,a.panel.empty()),a.renderLevel(t.rows,e),a.complete()}})},renderLevel:function(e,l){if(null==l||0!=this.opts.buttons.length||0!=l[this.opts.childrenField].length){var a,i,s,o,n,d,p=this,c=e||this.data,r=t(this.panel).children("td").length;return a=t("<td>").appendTo(p.panel),s=t('<div class="_level">').attr("data-parentId",l&&l[p.opts.idField]).appendTo(a),c.title?i=t('<div class="_title">').html(c.title).appendTo(s):p.opts.levelTitle&&(i=t('<div class="_title">').appendTo(s),i.html(r<p.opts.levelTitle.length?p.opts.levelTitle[r]:"level : "+r)),o=t('<div class="_items">').appendTo(s),t.each(c,function(t,e){e.parent=l,e.type=e.children&&e.children.length>0?"folder":"leaf",p.addItem(e,o)}),(!p.opts.singleRoot||p.opts.singleRoot&&l)&&(n=t('<div class="_button">').appendTo(s),t.each(p.opts.buttons,function(a,i){d=t('<button class="btn btn-xs">').addClass(i.class||p.opts.buttonDefaultClass).html(i.name).attr(i.attr).appendTo(n),"function"==typeof i.click&&d.click(function(t){i.click.call(p,e,l,this,t)})})),p}},addItem:function(e,l,a){var i,s,o,n=this;i=t('<div class="_item">').attr("id",e[n.opts.idField]).appendTo(l),o="function"==typeof n.opts.nameField?n.opts.nameField.call(n,e):e[n.opts.nameField],t('<span class="_itemName">').attr("title",o).html(o).appendTo(i),"folder"==e.type&&t('<span class="glyphicon glyphicon-play float-right">').appendTo(i),n.opts.itemButtons&&(s=t('<span class="_itemButtons">').appendTo(i),t.each(n.opts.itemButtons,function(l,o){t('<span class="glyphicon">').addClass(o.icon).click(function(t){return o.click.call(n,e,a,i),t.stopPropagation(),!1}).appendTo(s)})),i.click(function(t){n.click.call(n,e,this,t)}),a&&a[n.opts.childrenField]&&a[n.opts.childrenField].push(e)},reload:function(t,e){this.load(null,t,e)},reloadLevel:function(e){e?(this.reloadFlag=!0,t('div._item[id="'+e+'"]').click()):this.reload()},reloadItem:function(e,l){var a,i,s,o,n,d=this;a=d.findItem("string"==typeof e?e:e[d.opts.idField]),i=t('div._item[id="'+a[d.opts.idField]+'"]'),l?(t.extend(a,l),s="function"==typeof d.opts.nameField?d.opts.nameField.call(d,l):l[d.opts.nameField],i.find("._itemName").attr("title",s).html(s),i.click()):(n=t.extend({},d.opts.queryParams),a[d.opts.idField]?(n[d.opts.requestKey]=a[d.opts.idField],o=d.opts.url.replace("{"+d.opts.requestKey+"}",a[d.opts.idField])):(n[d.opts.requestKey]=d.opts.defaultId,o=d.opts.url.replace("{"+d.opts.requestKey+"}",d.opts.defaultId)),this.opts.ajax({url:o,data:n,mockPathData:d.opts.mockPathData,loading:d.opts.loadingFlag,onSuccess:function(e){e.rows&&e.rows[0]&&(t.extend(Dolphin.emptyObj(a),e.rows[0]),s="function"==typeof d.opts.nameField?d.opts.nameField.call(d,a):a[d.opts.nameField],i.find("._itemName").attr("title",s).html(s),i.removeClass("active"),i.click())}}))},findItem:function(t){function e(e){var l,i;for(l=0;l<e.length;l++){if(e[l][a.opts.idField]==t)return e[l];if(e[l][a.opts.childrenField]&&(i=arguments.callee(e[l][a.opts.childrenField])))return i}return null}var l,a=this;return l=e(a.data)},click:function(e,l,a){var i=this;(!t(l).hasClass("active")||i.reloadFlag)&&(t(l).closest("td").nextAll().remove(),t(l).siblings(".active").removeClass("active"),t(l).addClass("active"),e[i.opts.childrenField]&&!i.reloadFlag?i.loadData(e,e[i.opts.childrenField]):i.load(e),i.reloadFlag=!1),t(l).closest("table").find(".selected").removeClass("selected"),t(l).addClass("selected"),i.selectedItem=e;var s=t(l).closest("td"),o=0;s.prevAll("td").each(function(){o+=t(this).width()}),this.__panel__.animate({scrollLeft:o},500),"function"==typeof i.opts.click&&i.opts.click.call(l,e,a)},complete:function(){}},l.HORIZONTAL_TREE=e}(jQuery);
;/*!/js/grid.js*/
!function(t){function a(t){this.init(t),this.opts.data?this.loadData():this.opts.url&&this.load()}var s=Dolphin;a.defaults={id:null,panel:"#planList",url:null,data:null,queryParams:null,idField:"pkId",ajax:s.ajax,ajaxType:"get",titleFormatter:null,operationFormatter:null,columns:[],checkbox:!1,multiple:!0,childrenField:"children",pagination:!0,pageSize:5,pageNum:1,pageElements:0,onCheck:null,dataFilter:null},a.prototype={constructor:a,data:null,target:[],init:function(s){this.opts=t.extend({},a.defaults,s),this.opts.id||(this.opts.id=Math.round(Math.random()*Math.pow(10,6))),0==t(this.opts.panel).children("table").length&&t("<table>").addClass("grid").append("<tbody></tbody>").appendTo(this.opts.panel),this.opts.pagination&&0==t(this.opts.panel).children("nav.pagination-nav").length&&t("<nav>").addClass("pagination-nav").appendTo(this.opts.panel)},empty:function(){t(this.opts.panel).find("tbody, nav").empty()},loadData:function(t){this.empty(),this.data=t,this.initRows()},load:function(){this.empty();var a=t.extend({},this.opts.queryParams),i=this.opts.url;this.opts.pagination&&(i=s.urlAddParam(this.opts.url,{pageSize:this.opts.pageSize,pageNum:this.opts.pageNum})),this.opts.ajax({url:i,data:a,type:this.opts.ajaxType,onSuccess:function(t){"function"==typeof this.opts.dataFilter&&(t=this.opts.dataFilter.call(this,t)),this.data=t,this.initRows()}})},reload:function(){this.opts.pageNum=1,this.load()},query:function(t){this.opts.pageNum=1,this.opts.queryParams=t,this.load()},goPage:function(t){this.opts.pageNum=t,this.load()},initRows:function(){if(t(this.opts.panel).find(".no-result").remove(),this.data&&this.data.rows){if(this.target=[],this.data.rows.length>0)for(var a=0;a<this.data.rows.length;a++)this.addRow(this.data.rows[a],a);else t(this.opts.panel).prepend('<span class="no-result">查询结果为空。</span>');this.opts.pagination&&this.refreshPagination(),"function"==typeof this.opts.onLoad&&this.opts.onLoad.call(this)}},addRow:function(a,i){var e=this,o=t(this.opts.panel).find("tbody"),n={title:null,line:[]};s.browser.ismobile&&i>0&&t("<tr>").html(t("<td>").attr("colspan",this.opts.columns.length).css({border:0,height:"15px"})).appendTo(o);var l=t('<tr class="planTitle">').appendTo(o),p=null,h="";if(h+='	<td colspan="'+this.opts.columns.length+'" class="title">',this.opts.checkbox&&(h+='<span><input type="'+(this.opts.multiple?"checkbox":"radio")+'" index="'+i+'" value="'+a[this.opts.idField]+'" name="selectedItem" class="selectedItem"/></span>'),h+=this.opts.titleFormatter?this.opts.titleFormatter.call(this,a,i):"<span>"+a.title+"</span>",this.opts.operationFormatter&&!s.browser.ismobile&&(h+=this.opts.operationFormatter.call(this,a,i)),h+="	</td>",l.html(h),n.title=l,a[this.opts.childrenField])for(var r=0;r<a[this.opts.childrenField].length;r++){var d=a[this.opts.childrenField][r];p=t('<tr class="details">').appendTo(o),h="";for(var c=0;c<this.opts.columns.length;c++)h+='<td class="'+(this.opts.columns[c].className||"")+'" style="'+(this.opts.columns[c].width?"width:"+this.opts.columns[c].width:"")+'"  >',h+=this.opts.columns[c].formatter?this.opts.columns[c].formatter.call(this,d[this.opts.columns[c].code],d,a,r,i):d[this.opts.columns[c].code],h+="</td>";p.html(h),n.line.push(p)}if(this.target.push(n),this.opts.operationFormatter&&s.browser.ismobile){var u=t('<tr class="buttonRow">').appendTo(o);h='<td colspan="'+this.opts.columns.length+'">',h+=this.opts.operationFormatter.call(this,a,i),h+="</td>",u.html(h)}"function"==typeof this.opts.onLoadRow&&this.opts.onLoadRow.call(this,a,i),this.opts.onCheck&&l.find(".selectedItem").bind("change",function(){e.opts.onCheck.call(e,a,i,this)})},getChecked:function(){for(var a=t(this.opts.panel).find(".selectedItem:checked"),i=[],e=this,o=0;o<this.data.rows.length;o++)s.objInArray(this.data.rows[o],a,function(t,a){return t[e.opts.idField]===a.value})&&i.push(this.data.rows[o]);return i},checkedAll:function(){t(this.opts.panel).find(".selectedItem").each(function(){this.checked=!0}).change()},getDataByIndex:function(t){return this.data.rows[t]},refreshPagination:function(){var a=this,i="",e=Math.ceil(this.data.total/this.opts.pageSize);i+='<ul class="pagination '+(s.browser.ismobile?"pagination-sm":"")+'">',i+='	<li class="'+(this.opts.pageNum<=1?"disabled":"")+'"><a class="'+(this.opts.pageNum>1?"changePage":"")+'" targetPage="'+(this.opts.pageNum-1)+'" href="javascript:void(0)" aria-label="Previous"> <span',i+='			aria-hidden="true">&laquo;</span>',i+="	</a></li>",e>5&&this.opts.pageNum>3&&(i+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="1">1</a></li>',i+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+(this.opts.pageNum-3)+'">...</a></li>');var o=this.opts.pageNum-3;this.opts.pageNum<3?o=0:e>5&&this.opts.pageNum>e-3&&(o=e-5);for(var n=0;n<Math.min(e,5);n++)i+='	<li class="'+(o+n+1==this.opts.pageNum?"active":"")+'"><a class="changePage" href="javascript:void(0)" targetPage="'+(o+n+1)+'">'+(o+n+1)+"</a></li>";e>5&&this.opts.pageNum<e-2&&(i+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+(this.opts.pageNum-0+3)+'">...</a></li>',i+='	<li class=""><a class="changePage" href="javascript:void(0)" targetPage="'+e+'">'+e+"</a></li>"),i+='	<li class="'+(this.opts.pageNum>=e?"disabled":"")+'"><a class="'+(this.opts.pageNum<e?"changePage":"")+'" targetPage="'+(this.opts.pageNum-0+1)+'" href="javascript:void(0)" aria-label="Next"> <span',i+='			aria-hidden="true">&raquo;</span>',i+="	</a></li>",i+="</ul>",t(this.opts.panel).find("nav").html(i),t(this.opts.panel).find(".changePage").bind("click",function(){a.opts.pageNum=t(this).attr("targetPage"),a.opts.pageElements=(a.opts.pageNum-1)*a.opts.pageSize,a.load()})}},s.GRID=a,window.GRID=a}(jQuery);
;/*!/js/templateGrid.js*/
!function(){function t(t){this.init(t)&&(this.opts.data?this.loadData(this.opts.data,!0):this.opts.url&&this.load(!0))}var i=Dolphin;t.defaults={panel:"#productList",url:null,data:null,checkedData:null,idField:"id",queryParams:null,ajax:i.ajax,ajaxParam:null,pagination:!0,pageSize:12,pageNumber:1,paginationType:"page",pageSizeOption:[12,18,36],loadingFlag:!0,onLoadSuccess:null,template:null},t.prototype={constructor:t,data:null,dataPanel:null,moreButton:null,checkedObj:{},pagination:null,defaultUnit:null,init:function(a){var e=this;return a.template?(this.opts=$.extend({},t.defaults,a.template.defaults,a),$(this.opts.panel).addClass("dolphin_grid"),this.initCheckedData(),this.dataPanel=$('<div class="dolphin-row">').appendTo(this.opts.panel),this.opts.pagination&&(e.pagination=new i.PAGINATION({type:e.opts.paginationType,panel:e.opts.panel,pageNumber:e.opts.pageNumber,pageSize:e.opts.pageSize,pageSizeOption:e.opts.pageSizeOption,onChange:function(){e.opts.pageNumber=this.opts.pageNumber,e.opts.pageSize=this.opts.pageSize,e.load("page"==e.opts.paginationType)}})),"function"==typeof this.opts.template.init&&this.opts.template.init.call(this),this.opts.loadingFlag&&this.initLoading(),this):void i.alert("template参数为空")},initCheckedData:function(){if(this.opts.checkedData)for(var t=0;t<this.opts.checkedData.length;t++)this.checkedObj[this.opts.checkedData[t][this.opts.idField]]=this.opts.checkedData[t],this.checkedObj[this.opts.checkedData[t][this.opts.idField]].checked=!0;return this},getCheckedData:function(){var t=[];for(var i in this.checkedObj)this.checkedObj[i].checked&&t.push({code:i,quantity:this.checkedObj[i].quantity,price:this.checkedObj[i].price,additionPrice:this.checkedObj[i].additionPrice,baseNum:this.checkedObj[i].baseNum,zsdbl:this.checkedObj[i].divisor,promotionId:this.checkedObj[i].promotionId,unit:this.checkedObj[i].unit});return t},empty:function(){return $(this.opts.panel).empty(),this},loadData:function(t,i){return this.data=t,this.pagination.initData({total:this.data.total}),this.initData(i),this},load:function(t,i){var a=this,e=$.extend({pageSize:this.opts.pageSize,pageNumber:this.opts.pageNumber-1},this.opts.queryParams);return this.opts.loadingFlag&&this.loadingPanel.show(),this.data=this.opts.ajax($.extend({},this.opts.ajaxParam,{url:this.opts.url,data:e,onSuccess:function(e){a.data=e,a.pagination.initData({total:e.total}),a.initData(t),"function"==typeof i&&i.call(a,e)},onComplete:function(){a.opts.loadingFlag&&a.loadingPanel.hide()}})),this},query:function(t,i){return this.opts.queryParams=t,this.pageNumber=1,this.load(!0,i),this},initData:function(t){if(t&&$(this.dataPanel).empty(),this.data){for(var i=0;i<this.data.rows.length;i++)this.addRow(this.data.rows[i]);this.opts.pagination&&this.pagination.refresh(),"function"==typeof this.opts.onLoadSuccess&&this.opts.onLoadSuccess.call(this,this.data)}return this},addRow:function(t){var i=this.opts.template.item.call(this,t);return $(this.dataPanel).append(i),this},checkItem:function(t){var i=t.value;return this.checkedObj[i]?this.checkedObj[i].checked=t.checked:this.checkedObj[i]={checked:t.checked},this},changeNum:function(t,i){var a=$(t).attr("itemId"),e=$(t).attr("itemPrice").split(","),n=$(t).attr("itemUnit");return this.checkedObj[a]?$.extend(this.checkedObj[a],i,{quantity:t.value,price:e[0],additionPrice:e[1],baseNum:e[2],divisor:e[3],promotionId:e[4],unit:n}):this.checkedObj[a]=$.extend({},i,{quantity:t.value,price:e[0],additionPrice:e[1],baseNum:e[2],divisor:e[3],promotionId:e[4],unit:n}),this},initLoading:function(){this.loadingPanel=i.initLoadingPanel(this.opts.panel)}},i.TEMPLATE_GRID=t}();
;/*!/js/refWin.js*/
!function(t){function i(t){this.init(t)}var n=Dolphin;i.defaults={id:"myModal",className:"",title:"参照选择",url:null,data:null,idField:"code",textField:"name",modalSize:"",queryParams:null,queryCondition:null,ajax:n.ajax,type:"tree",multiple:!1,cascadeCheck:!0,onlyLeafCheck:!1,columns:[],striped:!0,bordered:!0,rowIndex:!0,width:null,pagination:!0,pageSize:5,pageNum:1,onload:function(){},onSubmit:null,onShow:null,mockPathData:null,showButton:null},i.prototype={constructor:i,data:null,win:null,refObj:null,queryform:null,init:function(o){var e=this;this.opts=t.extend({},i.defaults,o),this.render(),"tree"==this.opts.type?this.refObj=new n.TREE(t.extend({panel:this.win.find(".ref-obj-panel")},this.defaults,o)):"list"==this.opts.type&&(this.refObj=new n.LIST(t.extend({panel:this.win.find(".ref-obj-panel")},this.defaults,o))),this.opts.queryCondition,this.bind(),this.opts.showButton&&t(this.opts.showButton).click(function(){e.show()})},empty:function(){t(this.opts.panel).empty()},render:function(){var i=t('<div class="modal fade '+this.opts.className+'" id="'+this.opts.id+'" tabindex="-1" role="dialog" aria-labelledby="'+this.opts.id+'Label" aria-hidden="true">'),n="";n+='<div class="modal-dialog '+this.opts.modalSize+'">',n+='	<div class="modal-content">',n+='		<div class="modal-header">',n+='			<button type="button" class="close" data-dismiss="modal"',n+='				aria-label="Close">',n+='				<span aria-hidden="true">&times;</span>',n+="			</button>",n+='			<h4 class="modal-title" id="'+this.opts.id+'Label">',n+=this.opts.title,this.opts.queryCondition&&(n+=' <div class="ref-condition"><form class="refQueryForm">',n+='<div class="input-group input-group-sm">',n+='    <input type="text" class="form-control" name="'+this.opts.queryCondition.attr[0].code+'" placeholder="根据'+this.opts.queryCondition.attr[0].title+'查询..." dol-validate="minLength[2]" >',n+='    <span class="input-group-btn">',n+='        <button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search" aria-hidden="true"></span>&nbsp;</button>',n+="    </span>",n+="</div><!-- /input-group -->",n+="</form></div>"),n+="</h4>",n+="		</div>",n+='		<div class="modal-body">',n+='			<div class="ref-query-condition-panel"></div>',n+='			<div class="ref-obj-panel"></div>',n+="		</div>",n+='		<div class="modal-footer">',n+='			<button type="button" class="btn btn-primary submitButton">确定</button>',n+='			<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>',n+="		</div>",n+="	</div>",n+="</div>",this.win=i,i.html(n).appendTo("body")},renderCondition:function(){var t=this.win.find(".ref-query-condition-panel");return this.queryform=new n.FORM({panel:t}),this.queryform.renderForm(this.opts.queryCondition),this},bind:function(){function i(){o.queryform.validate()&&o.refObj.query(n.form2json(e))}var o=this;if(t(this.win).find(".submitButton").bind("click",function(){o.submit()}),this.opts.queryCondition){var e=this.win.find(".refQueryForm");o.queryform=new n.FORM({panel:e}),e.find("input").bind("click",function(t){13==t.keyCode&&i()}).next().children("button").bind("click",function(){i()})}},find:function(){},findById:function(){},findByText:function(){},show:function(){"function"==typeof this.opts.onShow&&this.opts.onShow.call(this),this.win.modal("show")},submit:function(){if("function"==typeof this.opts.onSubmit){var t=this.refObj.getChecked();t&&t.length>0?(this.opts.onSubmit.call(this,t),this.win.modal("hide")):n.alert("请至少选择一条数据。")}else this.win.modal("hide")}},n.REFWIN=i}(jQuery);